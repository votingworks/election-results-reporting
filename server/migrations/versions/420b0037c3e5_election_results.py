# pylint: disable=invalid-name
"""Election Results
Revision ID: 420b0037c3e5
Revises: cbe5c6d15c75
Create Date: 2021-10-05 11:25:20.137923+00:00
"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = '420b0037c3e5'
down_revision = 'cbe5c6d15c75'
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.create_table('election_result',
    sa.Column('created_at', sa.DateTime(), nullable=False),
    sa.Column('updated_at', sa.DateTime(), nullable=False),
    sa.Column('id', sa.String(length=200), nullable=False),
    sa.Column('total_ballots_cast', sa.String(length=200), nullable=False),
    sa.Column('source', sa.Enum('FILE', 'DATA_ENTRY', name='electionresultsource'), nullable=False),
    sa.Column('election_id', sa.String(length=200), nullable=False),
    sa.Column('jurisdiction_id', sa.String(length=200), nullable=False),
    sa.Column('precinct_id', sa.String(length=200), nullable=False),
    sa.Column('deleted_at', sa.DateTime(), nullable=True),
    sa.ForeignKeyConstraint(['election_id'], ['election.id'], name=op.f('election_result_election_id_fkey'), ondelete='cascade'),
    sa.ForeignKeyConstraint(['jurisdiction_id'], ['jurisdiction.id'], name=op.f('election_result_jurisdiction_id_fkey'), ondelete='cascade'),
    sa.ForeignKeyConstraint(['precinct_id'], ['precinct.id'], name=op.f('election_result_precinct_id_fkey'), ondelete='cascade'),
    sa.PrimaryKeyConstraint('id', name=op.f('election_result_pkey')),
    sa.UniqueConstraint('election_id', 'jurisdiction_id', name=op.f('election_result_election_id_jurisdiction_id_key'))
    )
    op.add_column('contest', sa.Column('election_result_id', sa.String(length=200), nullable=True))
    op.create_foreign_key(op.f('contest_election_result_id_fkey'), 'contest', 'election_result', ['election_result_id'], ['id'], ondelete='cascade')
    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    op.drop_constraint(op.f('contest_election_result_id_fkey'), 'contest', type_='foreignkey')
    op.drop_column('contest', 'election_result_id')
    op.drop_table('election_result')
    # ### end Alembic commands ###
